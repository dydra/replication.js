<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Muli:100,400,700|Oswald:300|Inconsolata,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
    <link type="text/css" rel="stylesheet" href="styles/app.min.css">
</head>

<body>
    <div id="stickyNavbarOverlay"></div>
    <div class="top-navbar">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    
                    
                        <h1 class="navbar-item">Documentation</h1>
                    
                    <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                
            </nav>
        </div>
    </div>
    <div class="container">
        <div class="columns">
            <div class="column is-3" id="sidebarNav">
                <div class="sidebar">
                    <nav>
                        <h2><a href="index.html">Home</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="BlankNode.html">BlankNode</a></li><li><a href="GDBObjectStore.html">GDBObjectStore</a></li><li><a href="GDBTransaction.html">GDBTransaction</a></li><li><a href="Graph.html">Graph</a></li><li><a href="GraphDatabase.html">GraphDatabase</a></li><li><a href="GraphEnvironment.html">GraphEnvironment</a></li><li><a href="GraphObject.html">GraphObject</a></li><li><a href="GraphStateError.html">GraphStateError</a></li><li><a href="GSP.html">GSP</a></li><li><a href="LangString.html">LangString</a></li><li><a href="Literal.html">Literal</a></li><li><a href="NamedNode.html">NamedNode</a></li><li><a href="Node.html">Node</a></li><li><a href="Patch.html">Patch</a></li><li><a href="Quad.html">Quad</a></li><li><a href="RDFDatabase.html">RDFDatabase</a></li><li><a href="RDFEnvironment.html">RDFEnvironment</a></li><li><a href="SimpleString.html">SimpleString</a></li><li><a href="SPARQL.html">SPARQL</a></li><li><a href="Statement.html">Statement</a></li><li><a href="Term.html">Term</a></li><li><a href="Triple.html">Triple</a></li><li><a href="UUID.html">UUID</a></li></ul><h3>Global</h3><ul><li><a href="global.html#bytesToUuid">bytesToUuid</a></li><li><a href="global.html#copyUUID">copyUUID</a></li><li><a href="global.html#createBlankNode">createBlankNode</a></li><li><a href="global.html#createGraph">createGraph</a></li><li><a href="global.html#createLiteral">createLiteral</a></li><li><a href="global.html#createNamedNode">createNamedNode</a></li><li><a href="global.html#createPatch">createPatch</a></li><li><a href="global.html#createQuad">createQuad</a></li><li><a href="global.html#createStatement">createStatement</a></li><li><a href="global.html#createTriple">createTriple</a></li><li><a href="global.html#createUUID">createUUID</a></li><li><a href="global.html#decode">decode</a></li><li><a href="global.html#encode">encode</a></li><li><a href="global.html#formatUUID">formatUUID</a></li><li><a href="global.html#isDeleteUUID">isDeleteUUID</a></li><li><a href="global.html#isInsertUUID">isInsertUUID</a></li><li><a href="global.html#makeUUID">makeUUID</a></li><li><a href="global.html#makeUUIDString">makeUUIDString</a></li><li><a href="global.html#onmessage">onmessage</a></li><li><a href="global.html#predicateLeaf">predicateLeaf</a></li><li><a href="global.html#resetUUIDState">resetUUIDState</a></li><li><a href="global.html#setUUIDState">setUUIDState</a></li><li><a href="global.html#UUIDState">UUIDState</a></li><li><a href="global.html#UUIDTimestamp">UUIDTimestamp</a></li><li><a href="global.html#v1">v1</a></li></ul></div>
                    </nav>
                </div>
            </div>
            <div class="column is-9-desktop">
                <div class="content" id="main-content-wrapper">
                    <header class="page-title">
                        <p>Title</p>
                        <h1>Home</h1>
                    </header>
                    
                    



    


    <h3> </h3>










    




    <section>
        <article><h2>dydra web client support</h2><p>This library implements a JavaScript web client interface to the Dydra 
RDF service.
It mediates persistence for native JavaScript application and u/i data models
to a remote Dydra service via GSP/HTTP and/or websockets.
The remote service implements either W3C GSP-conformant transactional repositories,
revisioned repositories which maintain data through PUT/POST/DELETE operations
or CRDT-repositories which interpret PATCH opertations to replicate and
reconcile data among multiple clients.</p>
<p>The library integrates an application data model with a remote store
by reconciling representations in three realms:</p>
<ul>
<li><p>web application data<br>represented as JavaScript objects<br>identified by a combination of instance identifier and application key values<br>described by JavaScript object properties, each of which binds either an atomic
  value, an object, or an array of such<br>combined into an active model which is associated with a revision<br>JavaScript proxy objects monitor access to instance propertiess and propagate
  them to the store  </p>
</li>
<li><p>intermediate graphs<br>each a collection of triples<br>each captures the object property changes associated with a given application
  model transaction<br>a JSON-LD context governs the relation between terms and property values<br>each associated with a revision to enable undo/redo  </p>
</li>
<li><p>persistent data<br>represented as a revisioned collection of RDF quads stored in a
  service repository<br>where the subject iri correspond to the application model instance identifier<br>the predicate arity is either one, for atomic values or higher for arrays<br>the object terms are either literals or subject iri of related resources  </p>
</li>
</ul>
<p>The library concerns the application data, the intermediate
graph and communicating it to the remote RDF repository.
It is realized by three components in the client:</p>
<ul>
<li>the GraphObject API</li>
<li>JavaScript / RDF mediation</li>
<li>the background remote request processing </li>
</ul>
<pre>
        application API                         background requests  
    <-    GraphObject   ->               <- GraphStore + RDF GSP,SPARQL ->

    Object  -  field-cache  -  Graph  -  GSP/websockets  -  RDF-repository

                      JavaScript / RDF mediation  
              <---- Graph-Data-Model + RDFDatabase ----->
</pre>


<h3>Application API</h3><p>The application API supports the user interface data model. Its
implmentation comprises the files</p>
<pre class="prettyprint source"><code>graph-object.js</code></pre><p>It provides the abstract model class, GraphObject, which encapsulates
intances of specializations to track field modifications and record a delta
map for use by the store mediation
layer.
That relies on, in addition to the tracking logic, default
methods to transform the delta map into an abstract patch
according to instance state (clean, deleted, modified, new, etc.)
and on logic to manage declarations for managed properties</p>
<pre class="prettyprint source"><code>GraphObject.prototype.asPatch[]()
GraphObject.prototype.managedProperties()
GraphObject.prototype.persistentProperties()
GraphObject.prototype.transactionalProperties()</code></pre><p>Should the application require other than the generic transformations,
it can override them as needed.
In connection with these, the respective concrete U/I classes must
They must also define respective static fields for</p>
<pre class="prettyprint source"><code>_persistentProperties
_transactionalProperties</code></pre><p>to indicate which fields are to be managed.
These are coallesced for the respective concrete class, upon first use.</p>
<h3>JavaScript / RDF Mediation</h3><p>The mediation layer implements the relation between the native JSON data
model and its representation as RDF. Its elements incorporate two layers:
absctract graph operations and RDF-specific implementations:</p>
<pre class="prettyprint source"><code>graph-database.js
RDF-database.js
graph-environment.js
RDF-environment.js</code></pre><p>and includes the utility</p>
<pre class="prettyprint source"><code>uuid-v1.js</code></pre><p>At the mediation layer, the class GraphDatabase provides the means
for the application to realize persistence either by
<a href="https://db.apache.org/jdo/">JDO-like</a> reachability or through
explicit store write operations. Either approach follows the pattern defined by
<a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB</a>
(<a href="https://developers.google.com/web/ilt/pwa/working-with-indexeddb">google</a>,
 <a href="https://www.w3.org/TR/IndexedDB-2">w3c</a>),
in that a GDBTransaction provides the context for both implicitly
persistent model data manipulation and explicit store operations.</p>
<p>In order to propagate commits and accept remote notifications this relies on
RDFGraph instances and it, in turn, on RDFEnvironment  instances,
to perform un/marshalling between RDF graphs and JSON objects.</p>
<p>The mediation layer provides the operations</p>
<pre class="prettyprint source"><code>GraphDatabase.objectStore
GraphDatabase.transaction
GDBObjectStore.put
GDBObjectStore.get
GDBObjectStore.delete
GDBObjectStore.attach
GDBObjectStore.detach
GDBTransaction.abort
GDBTransaction.commit
GDBTransaction.objectStore</code></pre><p>which implement the abstract mechanisms to bind instance to stores,
create transactions to govern changes and transform state changes onto
store requests upon transaction completion.</p>
<p>They rely on the RDF-specific implementation to 
implement RDF instance identifiers and IndexedDB key functions to govern the
relation between data model entities and their remote RDF representation.</p>
<p>The arguments to attach operations serve as roots to a reachability graph,
of which the objects are registered with the transaction's active ObjectStore.
When a transaction commits, this collection is examined and its field delta
maps are interpreted to generate GSP PATCH operations to propagate to the
remote replication service.
If a transaction aborts, then the maps are used to roll the object states back
view the method</p>
<pre class="prettyprint source"><code>GraphObject.prototype.rollback</code></pre><h3>Background Replication</h3><p>The interaction with a remote RDF service for the actual data exchange
is accomplished by a background via Promises.
When either a transaction is committed explicitly or a chain of GDBObjectStore put
operations completes, the deferred phase transforms the abstract 
patch descriptions into a concrete GSP request and executes it on the remote 
service.</p>
<p>This is defined in </p>
<pre class="prettyprint source"><code>rdf-database.js</code></pre><p>as concrete implemetations for the operators</p>
<pre class="prettyprint source"><code>RDFDatabase.prototype.describe()
RDFDatabase.prototype.head()
RDFDatabase.prototype.get()
RDFDatabase.prototype.patch()</code></pre><p>which rely on the RDFEnvironment implementation for</p>
<pre class="prettyprint source"><code>RDFEnvironment.prototype.createPatch()
RDFEnvironment.prototype.createNamedNode()</code></pre><p>and GSP/SPARQL implementation for</p>
<pre class="prettyprint source"><code>GSP.get()
GSP.head()
GSP.patch()</code></pre><p>The operations yielf IndexedDB Request results and completion
notification is through the onsuccess property.</p>
<h3>Background change notification</h3><p>The application main thread receives changes from background websocket
listeners, which accept patch requests from the remote service.
These are translated back into property delta maps, which reference
attached GraphObject instances
and are passed to the application in the events</p>
<pre class="prettyprint source"><code>GraphObject.prototype.oncreate
GraphObject.prototype.onupdate
GraphObject.prototype.ondelete</code></pre><p>for those instances to examine and apply with the methods</p>
<pre class="prettyprint source"><code>GraphObject.prototype.rollforward</code></pre></article>
    </section>









<section>

<header>
    
        <h2>graph-database.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>The classes</p>
<ul>
<li>GraphDatabase</li>
<li>GDBTransaction</li>
<li>GDBObjectStore</li>
</ul>
<p>provide the javascript/graph mediation layer in a form which combines the
IndexedDB and JDO APIs. It support the standard operations</p>
<ul>
<li>open, close</li>
<li>transaction</li>
<li>createObjectStore</li>
<li>get, put, delete</li>
</ul>
<p>Additional operators extend IndexedDB semantics to accommodate basic JDO/JPA
behaviour:</p>
<ul>
<li>attach, detach</li>
<li>commit</li>
</ul>
<p>The application-thread API operators transform between native javascript
objects and graphs to be exchanged as websockets/fetch requests with a remote
graph store which acts as the Graph storage service.<br>The object<->graph transformation relies on the GraphObject state tracking
and the field<->term mapping mechanisms which a GDBObjectStore delegates
to a GraphEnvironment.</p>
<p>The IndexedDB transaction behaviour is combined with that of JDO.
The former recommendation specifies that, once no further operation is
possible, a transaction commits.</p>
<pre class="prettyprint source"><code>http://blog.nparashuram.com/2011/11/indexeddb-apis-javascriptnext.html
https://w3c.github.io/IndexedDB/#async-execute-request</code></pre><p>As per the w3c IndexedDB description, operations are queued as requests and
each is run asynchronously, but in turn, in the order created. Upon completion,
to notify the application either onerror or onsuccess is invoked for each
request.<br>Once a notification returns and no further request is pending, it is
expected that the active transaction have dynamic extent only, that is, the
main thread maintains no control flow which expect the transaction to have
indefinite extent and to be able to an additional request. Under this
assumption, the transaction can be be committed as soon a no request is
pending.<br>A non-local control transfer from a request notification should abort the
transaction.<br>When the transaction commits, any managed changes which happen during the
transaction's extent are marshalled and excuted as well, after which instance
specific onsuccess/failure invoked.
In addition to the implicit completion, an explicit commit operation
can apply pending request and managed changes manually.</p>
<p>The put/get functions rely on promises to implement asynchronous behaviour.
see
    https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise
For a put operation, the execution function marshals the object state into
a pending request and immediately resolves the promise.
It provides a then function which implements the IndexedDB asynchronous
behaviour by iterating over all accumulated put requests, caching the request
data to be transmitted when the transaction completes and invoking each
request's onsuccess.
For a get request, the execute function initiates the retrieval and
resolves the promise when the response arrives, while the then function
unmarshals the result and invokes the request's onsuccess to the the
data to the application.
When executing the then functions, shuld no request remain, the transaction
is completed. but transmitting all accumulated combined put data and
patches from managed objects.</p>
<p>The default implementation uses the W3C SPARQL and Graph Store Protocols to
communicate with a CRDT-as-RDF service. A GraphEnvironment combines JSON-LD
term/field mapping together with graph manipulation utilites from rdflib
to provie the default implemention of the abstract interface.</p></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="graph-database.js.html" class="button">View Source</a>
            <span>
                <a href="graph-database.js.html">graph-database.js</a>, <a href="graph-database.js.html#line3">line 3</a>
            </span>
        </p>
    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>graph-object.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>The class GraphObject is an abstract class which wraps each concrete
instance in a proxy to mediate property access and implement a jdo/jpa-like
state machine to control instance.
The logic distinguished detached/attached situations wrt a ReplicaObjectStore
and, for attached objects, constrcts for them a delta map and uses that cache
upon tranaction completion to propagate changes to the respective remote
storage service.</p>
<p>The state graph is a reduced version of the JDO space which corresponds to
that model's 'persistent' states, and the 'transient' realm of that JDO space
does not figure in this implementation.</p>
<p>That is, the reduced space includes just
    new
    clean
    dirty
    deleted
with which the attachment/transaction status combines to yield the JDO
equivalents.</p>
<p>see:
    https://db.apache.org/jdo/state_transition.html,
    https://en.wikipedia.org/wiki/Java_Persistence_API</p>
<p>For specialized GraphObject classes :</p>
<ul>
<li>writes to managed properties side-effect the state.</li>
<li>attached objects also generate delta maps during a transaction.</li>
<li>transactional reads from managed properties require a valid state.</li>
</ul></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="graph-object.js.html" class="button">View Source</a>
            <span>
                <a href="graph-object.js.html">graph-object.js</a>, <a href="graph-object.js.html#line3">line 3</a>
            </span>
        </p>
    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>rdf-client.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>Provide a means to prefetch everything of interest</p></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="rdf-client.js.html" class="button">View Source</a>
            <span>
                <a href="rdf-client.js.html">rdf-client.js</a>, <a href="rdf-client.js.html#line3">line 3</a>
            </span>
        </p>
    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>rdf-database.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>The class RDFDatabase extends GraphDatabase to implement communication
via RDF Graph Store and SPARQL protocols.</p></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="rdf-database.js.html" class="button">View Source</a>
            <span>
                <a href="rdf-database.js.html">rdf-database.js</a>, <a href="rdf-database.js.html#line3">line 3</a>
            </span>
        </p>
    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>rdf-environment.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>implement a standard RDF api, following
   https://<a href="http://www.w3.org/community/rdfjs/">www.w3.org/community/rdfjs/</a>
   https://<a href="http://www.w3.org/community/rdfjs/wiki/Comparison_of_RDFJS_libraries">www.w3.org/community/rdfjs/wiki/Comparison_of_RDFJS_libraries</a>
   https://<a href="http://www.w3.org/TR/rdf-interfaces/#idl-def-RDFEnvironment">www.w3.org/TR/rdf-interfaces/#idl-def-RDFEnvironment</a>
   ceur-ws.org/Vol-1268/paper13.pdf
   https://github.com/rdf-ext/rdf-ext
   https://github.com/rdfjs/data-model</p></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="rdf-environment.js.html" class="button">View Source</a>
            <span>
                <a href="rdf-environment.js.html">rdf-environment.js</a>, <a href="rdf-environment.js.html#line3">line 3</a>
            </span>
        </p>
    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>




                </div>
            </div>
        </div>
    </div>

<footer class="footer">
    <div class="content has-text-centered">
        <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Feb 12 2019 07:26:18 GMT+0100 (Central European Standard Time)</p>
        <p class="sidebar-created-by">
            <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
            <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers</a>
        </p>
    </div>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/app.min.js"></script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>